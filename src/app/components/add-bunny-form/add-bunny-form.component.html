<section class="add-bunny-section mb-5">
  <div class="section-header mb-4">
    <h2 class="section-title">Add New Bunny</h2>
    <p class="section-subtitle text-muted">
      Create a new virtual bunny to care for
    </p>
  </div>

  <div class="card add-bunny-card">
    <div class="card-body">
      <form [formGroup]="addBunnyForm" (ngSubmit)="onAddBunny()" novalidate>
        <div class="row g-3 mb-3">
          <div class="col-12 col-md-6">
            <label for="bunnyName" class="form-label">Name *</label>
            <input
              type="text"
              class="form-control"
              [class.is-invalid]="hasFieldError('name')"
              id="bunnyName"
              formControlName="name"
              placeholder="Enter bunny name"
            />
            <div *ngIf="hasFieldError('name')" class="invalid-feedback">
              {{ getFieldError("name") }}
            </div>
          </div>

          <div class="col-12 col-md-6">
            <label for="bunnyAvatar" class="form-label">Avatar URL <span class="text-muted">(optional)</span></label>
            <input
              type="url"
              class="form-control"
              [class.is-invalid]="hasFieldError('avatarUrl')"
              id="bunnyAvatar"
              formControlName="avatarUrl"
              placeholder="https://gravatar.com/avatar/... or https://imgur.com/..."
            />
            <div class="form-text text-muted small">
              Examples: Gravatar, Imgur, Cloudinary, or any image URL
            </div>
            <div *ngIf="hasFieldError('avatarUrl')" class="invalid-feedback">
              {{ getFieldError("avatarUrl") }}
            </div>
          </div>
        </div>

        <div class="mb-4">
          <div class="d-flex justify-content-between align-items-center">
            <span class="form-label mb-0">Initial Happiness</span>
            <span class="text-muted">10%</span>
          </div>
        </div>

        <div class="d-flex gap-2">
          <button
            type="submit"
            class="btn btn-dark"
            [disabled]="addBunnyForm.invalid || (isSubmitting$ | async)"
          >
            <span
              *ngIf="isSubmitting$ | async"
              class="spinner-border spinner-border-sm me-2"
              role="status"
            >
              <span class="visually-hidden">Loading...</span>
            </span>
            {{ (isSubmitting$ | async) ? "Adding..." : "Add Bunny" }}
          </button>
          <button
            type="button"
            class="btn btn-light"
            (click)="
              addBunnyForm.reset({
                name: '',
                avatarUrl: '',
                happiness: 10
              })
            "
          >
            Reset
          </button>
        </div>
      </form>
    </div>
  </div>
</section>
